<!DOCTYPE html>
<html>

    <head>
        <script type="text/javascript" src="//code.jquery.com/jquery-1.8.0.min.js"></script>
        <script type="text/javascript">
            function kill(){
                console.log('killed it')
                sse.close();
            }
            function openit(){
                console.log('re createSSE')
                createSSE();              
            }
            function createSSE(){
                sse = new EventSource('http://10.0.1.154:8088/my_event_source');
                sse.onmessage = function(message) {
                    console.log('A message has arrived!');
                    $('#output').append('<li>'+message.data+'</li>');
                }                
            }
            $(document).ready(
                function() {
                    createSSE();
                })

        </script>
    </head>

    <body>

        <h2>Demo</h2>
        <button onclick="kill()">kill</button>
        <button onclick="openit()"">open</button>
        <ul id="output">

        </ul>

    </body>

</html>
